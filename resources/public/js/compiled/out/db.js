// Compiled by ClojureScript 1.10.773 {}
goog.provide('db');
goog.require('cljs.core');
goog.require('datascript.core');
/**
 * Description
 *  create schema (datoms) for db,
 *  schema describes the set of attributes
 */
db.schema = cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword("transaction","money-source","transaction/money-source",-878971968),new cljs.core.Keyword("money-source","name","money-source/name",-388621823),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),new cljs.core.Keyword("transaction","money","transaction/money",-1907457661),new cljs.core.Keyword("transaction","date","transaction/date",694214084),new cljs.core.Keyword("transaction","flow","transaction/flow",-1568838874),new cljs.core.Keyword("tag","income-tag","tag/income-tag",1411796465),new cljs.core.Keyword("money-source","account-number","money-source/account-number",1575588631),new cljs.core.Keyword("money-source","description","money-source/description",705134424),new cljs.core.Keyword("transaction","tag","transaction/tag",863365855)],[new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword("db","valueType","db/valueType",1827971944),new cljs.core.Keyword("db.type","ref","db.type/ref",-1728373079),new cljs.core.Keyword("db","isComponent","db/isComponent",423352398),true,new cljs.core.Keyword("db","cardinality","db/cardinality",-104975659),new cljs.core.Keyword("db.cardinality","one","db.cardinality/one",1428352190)], null),cljs.core.PersistentArrayMap.EMPTY,cljs.core.PersistentArrayMap.EMPTY,cljs.core.PersistentArrayMap.EMPTY,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("db","doc","db/doc",1913350069),"date"], null),cljs.core.PersistentArrayMap.EMPTY,cljs.core.PersistentArrayMap.EMPTY,cljs.core.PersistentArrayMap.EMPTY,cljs.core.PersistentArrayMap.EMPTY,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword("db","valueType","db/valueType",1827971944),new cljs.core.Keyword("db.type","ref","db.type/ref",-1728373079),new cljs.core.Keyword("db","isComponent","db/isComponent",423352398),true,new cljs.core.Keyword("db","cardinality","db/cardinality",-104975659),new cljs.core.Keyword("db.cardinality","one","db.cardinality/one",1428352190)], null)]);
db.db = datascript.core.create_conn.call(null,db.schema);
db.db_datoms = (function db$db_datoms(data){
db.db = datascript.core.create_conn.call(null,db.schema);

return datascript.core.transact_BANG_.call(null,db.db,data);
});
db.db_datoms.call(null,new cljs.core.PersistentVector(null, 21, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-1),new cljs.core.Keyword("tag","income-tag","tag/income-tag",1411796465),"deposits"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-2),new cljs.core.Keyword("tag","income-tag","tag/income-tag",1411796465),"salary"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-3),new cljs.core.Keyword("tag","income-tag","tag/income-tag",1411796465),"savings"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-4),new cljs.core.Keyword("tag","income-tag","tag/income-tag",1411796465),"other"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-5),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"clothes"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-6),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"gifts"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-7),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"health"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-8),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"food"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-9),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"transport"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-10),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"sport"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-11),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"travel"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-12),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"entertainment"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-13),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"house"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-14),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"pets"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-15),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"family"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-16),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"car"], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-17),new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522),"other"], null),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-18),new cljs.core.Keyword("money-source","name","money-source/name",-388621823),"cash",new cljs.core.Keyword("money-source","description","money-source/description",705134424),"",new cljs.core.Keyword("money-source","account-number","money-source/account-number",1575588631),""], null),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-19),new cljs.core.Keyword("transaction","date","transaction/date",694214084),"11",new cljs.core.Keyword("transaction","money-source","transaction/money-source",-878971968),(-18),new cljs.core.Keyword("transaction","tag","transaction/tag",863365855),(-3),new cljs.core.Keyword("transaction","money","transaction/money",-1907457661),(1000),new cljs.core.Keyword("transaction","flow","transaction/flow",-1568838874),true], null),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-20),new cljs.core.Keyword("transaction","date","transaction/date",694214084),"03",new cljs.core.Keyword("transaction","money-source","transaction/money-source",-878971968),(-18),new cljs.core.Keyword("transaction","tag","transaction/tag",863365855),(-7),new cljs.core.Keyword("transaction","money","transaction/money",-1907457661),(3000),new cljs.core.Keyword("transaction","flow","transaction/flow",-1568838874),false], null),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-21),new cljs.core.Keyword("transaction","date","transaction/date",694214084),"00000000",new cljs.core.Keyword("transaction","money-source","transaction/money-source",-878971968),(-18),new cljs.core.Keyword("transaction","tag","transaction/tag",863365855),(-2),new cljs.core.Keyword("transaction","money","transaction/money",-1907457661),(400),new cljs.core.Keyword("transaction","flow","transaction/flow",-1568838874),false], null)], null));
db.add_income = (function db$add_income(data){
return db.db_datoms.call(null,cljs.core.merge.call(null,data,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-1),new cljs.core.Keyword("transaction","flow","transaction/flow",-1568838874),true], null)));
});
db.add_expence = (function db$add_expence(data){
return db.db_datoms.call(null,cljs.core.merge.call(null,data,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),(-1),new cljs.core.Keyword("transaction","flow","transaction/flow",-1568838874),false], null)));
});
db.get_column = (function db$get_column(column){
return datascript.core.q.call(null,new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"find","find",496279456),new cljs.core.Symbol(null,"?value","?value",393627875,null),new cljs.core.Keyword(null,"in","in",-1531184865),new cljs.core.Symbol(null,"$","$",-1580747756,null),new cljs.core.Symbol(null,"?column","?column",-1649786684,null),new cljs.core.Keyword(null,"where","where",-2044795965),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"_","_",-1201019570,null),new cljs.core.Symbol(null,"?column","?column",-1649786684,null),new cljs.core.Symbol(null,"?value","?value",393627875,null)], null)], null),cljs.core.deref.call(null,db.db),column);
});
datascript.core.q.call(null,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"find","find",496279456),cljs.core.list(new cljs.core.Symbol(null,"pull","pull",779986722,null),new cljs.core.Symbol(null,"?transaction","?transaction",1454233690,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("transaction","name","transaction/name",-427515125)], null)),new cljs.core.Keyword(null,"in","in",-1531184865),new cljs.core.Symbol(null,"$","$",-1580747756,null),new cljs.core.Keyword(null,"where","where",-2044795965),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"?transaction","?transaction",1454233690,null),new cljs.core.Keyword("transaction","name","transaction/name",-427515125)], null)], null),cljs.core.deref.call(null,db.db));
datascript.core.q.call(null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"find","find",496279456),new cljs.core.Symbol(null,"?e","?e",-1194391683,null),new cljs.core.Keyword(null,"where","where",-2044795965),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"?e","?e",-1194391683,null),new cljs.core.Keyword("transaction","id","transaction/id",719161206)], null)], null),cljs.core.deref.call(null,db.db));
db.get_income_tags = (function db$get_income_tags(){
return db.get_column.call(null,new cljs.core.Keyword("tag","income-tag","tag/income-tag",1411796465));
});
db.get_expense_tags = (function db$get_expense_tags(){
return db.get_column.call(null,new cljs.core.Keyword("tag","expence-tag","tag/expence-tag",11955522));
});
db.get_money_source = (function db$get_money_source(){
return db.get_column.call(null,new cljs.core.Keyword(null,"money-source","money-source",1262276382));
});
db.get_transactions = (function db$get_transactions(){
return datascript.core.pull_many.call(null,cljs.core.deref.call(null,db.db),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null)], null),cljs.core.vec.call(null,cljs.core.apply.call(null,cljs.core.concat,datascript.core.q.call(null,new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"find","find",496279456),new cljs.core.Symbol(null,"?p","?p",-10896580,null),new cljs.core.Keyword(null,"in","in",-1531184865),new cljs.core.Symbol(null,"$","$",-1580747756,null),new cljs.core.Keyword(null,"where","where",-2044795965),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"?p","?p",-10896580,null),new cljs.core.Keyword("transaction","name","transaction/name",-427515125)], null)], null),cljs.core.deref.call(null,db.db)))));
});
db.get_expense_tags.call(null);
db.get_transactions.call(null);
datascript.core.datoms.call(null,cljs.core.deref.call(null,db.db),new cljs.core.Keyword(null,"eavt","eavt",-666437073));
datascript.core.datoms.call(null,cljs.core.deref.call(null,db.db),new cljs.core.Keyword(null,"avet","avet",1383857032));

//# sourceMappingURL=db.js.map?rel=1637332584641
